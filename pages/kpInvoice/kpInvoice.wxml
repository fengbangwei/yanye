<view class="kp-main">
  <view class="kp-header">
    <view class="header-img">
      <image src="../resource/img/weixin.png" alt="" />
    </view>
    <view class="header-title">
      <h4>盐业公司</h4>
    </view>
  </view>
  <view class="kp-container">
    <view class="cont">
      <view class="container-select">
        <view class="container-option" :class="{'select-active':selectDataForm}" bindtap="selectForm(1)">
          <view>公司抬头</view>
        </view>
        <view class="container-option" :class="{'select-active':!selectDataForm}" bindtap="selectForm(2)">
          <view>个人或其他</view>
        </view>
      </view>
      <view class="form-list">
        <view class="form-item" v-if="!secondSetp">
          <template v-if="selectDataForm">
            <view class="uni-form-item uni-row company">
              <view class="title">发票抬头</view>
              <input class="uni-input" focus placeholder="请输入发票抬头(必填)" input="querytaxnoAndname" v-model="formdata.ghf_mc" />
              <view bindtap="selectClient">
                <span class="iconfont icon-jia"></span>
              </view>
              <view class="companyList" v-show="formdata.ghf_mc">
                <view class="companyItem" v-show="!companyList">
                  <text class="companyName" style="text-align: center;">未查询到数据</text>
                </view>
                <view class="companyItem" :key="item.name" v-for="item in companyList" click="queryCompanyInfo(item.name)">
                  <text class="companyName">{{item.name}}</text>
                </view>
              </view>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">税号</view>
              <input class="uni-input" placeholder="请输入税号(必填)" v-model="formdata.ghf_nsrsbh" />
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">手机号码</view>
              <input class="uni-input" placeholder="请输入手机号码(必填)" v-model="formdata.ghf_sj" />
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">邮箱地址</view>
              <input class="uni-input" placeholder="请输入邮箱" v-model="formdata.ghf_email" />
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">备注</view>
              <input class="uni-input" placeholder="选填" v-model="formdata.bz" />
            </view>
            <view class="uni-form-item uni-row icon-more" bindtap="selectMore">
              <view class="title">更多发票信息(选填)</view>
              <span class="iconfont" :class="isFalseMore?'icon-up-':'icon-down'"></span>
            </view>
            <template v-if="isFalseMore">
              <view class="uni-form-item uni-row">
                <view class="title">地址、电话</view>
                <textarea class="uni-input" auto-height="true" placeholder="选填" v-model="formdata.ghf_dzdh"></textarea>
              </view>
              <view class="uni-form-item uni-row">
                <view class="title">开户行及账号</view>
                <textarea class="uni-input" auto-height="true" placeholder="选填" v-model="formdata.ghf_yhzh"></textarea>
              </view>
            </template>
          </template>
          <template v-else>
            <view class="uni-form-item uni-row">
              <view class="title">发票抬头</view>
              <input class="uni-input" focus placeholder="请输入发票抬头(必填)" v-model="formdata.ghf_mc" />
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">手机号码</view>
              <input class="uni-input" placeholder="请输入手机号码(必填)" v-model="formdata.ghf_sj" />
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">邮箱地址</view>
              <input class="uni-input" placeholder="请输入邮箱" v-model="formdata.ghf_email" />
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">备注</view>
              <input class="uni-input" placeholder="选填" v-model="formdata.bz" />
            </view>
          </template>
        </view>
        <view class="form-item" v-else>
          <template v-if="selectDataForm">
            <view class="uni-form-item uni-row">
              <view class="title">发票抬头</view>
              <span>{{formdata.ghf_mc}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">税号</view>
              <span>{{formdata.ghf_nsrsbh}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">手机号码</view>
              <span>{{formdata.ghf_sj}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">邮箱地址</view>
              <span>{{formdata.ghf_email}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">备注</view>
              <span>{{formdata.bz}}</span>
            </view>
            <view class="uni-form-item uni-row icon-more" bindtap="selectMore">
              <view class="title">更多发票信息(选填)</view>
              <span class="iconfont" :class="isFalseMore?'icon-down':'icon-arrow-left'"></span>
            </view>
            <template v-if="isFalseMore">
              <view class="uni-form-item uni-row">
                <view class="title">地址、电话</view>
                <span>{{formdata.ghf_dzdh}}</span>
              </view>
              <view class="uni-form-item uni-row">
                <view class="title">开户行及账号</view>
                <span>{{formdata.ghf_yhzh}}</span>
              </view>
            </template>
          </template>
          <template v-else>
            <view class="uni-form-item uni-row">
              <view class="title">发票抬头</view>
              <span>{{formdata.ghf_mc}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">手机号码</view>
              <span>{{formdata.ghf_sj}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">邮箱地址</view>
              <span>{{formdata.ghf_email}}</span>
            </view>
            <view class="uni-form-item uni-row">
              <view class="title">备注</view>
              <span>{{formdata.bz}}</span>
            </view>
          </template>
        </view>
      </view>
    </view>
    <view class="form-commodity">
      <view class="commdity-item  commodity-header">
        <text>商品信息</text>
        <text>开票金额(元)</text>
        <text>税率</text>
      </view>
      <view class="commdity-item" :key="item.xmmc" v-for="item in formdata.goodsList">
        <text>{{item.xmmc}}</text>
        <text>{{item.xmje}}</text>
        <text>{{item.sl}}%</text>
      </view>
    </view>
    <view class="add-commity" bindtap="addCommodity">
      <view>
        <span class="iconfont icon-jia"></span>
        <text>添加商品明细</text>
      </view>
    </view>
    <view class="add-commity" bindtap="removeCommodity">
      <view>
        <span class="iconfont icon-remove iconfontRed"></span>
        <text>删除商品明细</text>
      </view>
    </view>
  </view>
  <view class="footer">
    <view v-if="secondSetp">
      <button bindtap="firstSetp">上一步</button>
    </view>
    <view class="money">
      <text>合计：</text>
      <text class="price">{{totalMoney}}</text>
    </view>
    <view>
      <button bindtap="sendKpInfo">{{secondSetp?'确定':'下一步'}}</button>
    </view>
  </view>
</view>